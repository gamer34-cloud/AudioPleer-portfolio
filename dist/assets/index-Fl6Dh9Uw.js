(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function k(e,t){const{tag:s,id:o,className:n}=C(e),i=t?document.createElementNS(t,s):document.createElement(s);return o&&(i.id=o),n&&(t?i.setAttribute("class",n):i.className=n),i}function C(e){const t=e.split(/([.#])/);let s="",o="";for(let n=1;n<t.length;n+=2)switch(t[n]){case".":s+=` ${t[n+1]}`;break;case"#":o=t[n+1]}return{className:s.trim(),tag:t[0]||"div",id:o}}function b(e,...t){let s;const o=typeof e;if(o==="string")s=k(e);else if(o==="function"){const n=e;s=new n(...t)}else throw new Error("At least one argument required");return h(a(s),t),s}const l=b;b.extend=function(...t){return b.bind(this,...t)};function T(e,t){let s=t;const o=a(e),n=a(s);return s===n&&n.__redom_view&&(s=n.__redom_view),n.parentNode&&(S(s,n,o),o.removeChild(n)),s}function S(e,t,s){const o=t.__redom_lifecycle;if(w(o)){t.__redom_lifecycle={};return}let n=s;for(t.__redom_mounted&&m(t,"onunmount");n;){const i=n.__redom_lifecycle||{};for(const c in o)i[c]&&(i[c]-=o[c]);w(i)&&(n.__redom_lifecycle=null),n=n.parentNode}}function w(e){if(e==null)return!0;for(const t in e)if(e[t])return!1;return!0}const $=["onmount","onremount","onunmount"],q=typeof window<"u"&&"ShadowRoot"in window;function x(e,t,s,o){let n=t;const i=a(e),c=a(n);n===c&&c.__redom_view&&(n=c.__redom_view),n!==c&&(c.__redom_view=n);const r=c.__redom_mounted,f=c.parentNode;if(r&&f!==i&&S(n,c,f),s!=null)if(o){const u=a(s);u.__redom_mounted&&m(u,"onunmount"),i.replaceChild(c,u)}else i.insertBefore(c,a(s));else i.appendChild(c);return I(n,c,i,f),n}function m(e,t){t==="onmount"||t==="onremount"?e.__redom_mounted=!0:t==="onunmount"&&(e.__redom_mounted=!1);const s=e.__redom_lifecycle;if(!s)return;const o=e.__redom_view;let n=0;o?.[t]?.();for(const i in s)i&&n++;if(n){let i=e.firstChild;for(;i;){const c=i.nextSibling;m(i,t),i=c}}}function I(e,t,s,o){t.__redom_lifecycle||(t.__redom_lifecycle={});const n=t.__redom_lifecycle,i=s===o;let c=!1;for(const u of $)i||e!==t&&u in e&&(n[u]=(n[u]||0)+1),n[u]&&(c=!0);if(!c){t.__redom_lifecycle={};return}let r=s,f=!1;for((i||r?.__redom_mounted)&&(m(t,i?"onremount":"onmount"),f=!0);r;){const u=r.parentNode;r.__redom_lifecycle||(r.__redom_lifecycle={});const _=r.__redom_lifecycle;for(const p in n)_[p]=(_[p]||0)+n[p];if(f)break;(r.nodeType===Node.DOCUMENT_NODE||q&&r instanceof ShadowRoot||u?.__redom_mounted)&&(m(r,i?"onremount":"onmount"),f=!0),r=u}}function M(e,t,s){const o=a(e);if(typeof t=="object")for(const n in t)v(o,n,t[n]);else v(o,t,s)}function v(e,t,s){e.style[t]=s??""}const g="http://www.w3.org/1999/xlink";function E(e,t,s,o){const n=a(e);if(typeof t=="object")for(const c in t)E(n,c,t[c]);else{const c=n instanceof SVGElement,r=typeof s=="function";if(t==="style"&&typeof s=="object")M(n,s);else if(c&&r)n[t]=s;else if(t==="dataset")L(n,s);else if(!c&&(t in n||r)&&t!=="list")n[t]=s;else{if(c&&t==="xlink"){N(n,s);return}if(t==="class"){P(n,s);return}s==null?n.removeAttribute(t):n.setAttribute(t,s)}}}function P(e,t){t==null?e.removeAttribute("class"):e.classList?e.classList.add(t):typeof e.className=="object"&&e.className&&e.className.baseVal?e.className.baseVal=`${e.className.baseVal} ${t}`.trim():e.className=`${e.className} ${t}`.trim()}function N(e,t,s){if(typeof t=="object")for(const o in t)N(e,o,t[o]);else s!=null?e.setAttributeNS(g,t,s):e.removeAttributeNS(g,t,s)}function L(e,t,s){if(typeof t=="object")for(const o in t)L(e,o,t[o]);else s!=null?e.dataset[t]=s:delete e.dataset[t]}function V(e){return document.createTextNode(e??"")}function h(e,t,s){for(const o of t){if(o!==0&&!o)continue;const n=typeof o;n==="function"?o(e):n==="string"||n==="number"?e.appendChild(V(o)):A(a(o))?x(e,o):o.length?h(e,o):n==="object"&&E(e,o,null)}}function a(e){return e.nodeType&&e||!e.el&&e||a(e.el)}function A(e){return e?.nodeType}function F(e,...t){const s=a(e);let o=j(e,t,s.firstChild);for(;o;){const n=o.nextSibling;T(e,o),o=n}}function j(e,t,s){let o=s;const n=Array(t.length);for(let i=0;i<t.length;i++)n[i]=t[i]&&a(t[i]);for(let i=0;i<t.length;i++){const c=t[i];if(!c)continue;const r=n[i];if(r===o){o=o.nextSibling;continue}if(A(r)){const f=o?.nextSibling,_=c.__redom_index!=null&&f===n[i+1];x(e,c,o,_),_&&(o=f);continue}c.length!=null&&(o=j(e,c,o))}return o}const O="http://www.w3.org/2000/svg";function d(e,...t){let s;const o=typeof e;if(o==="string")s=k(e,O);else if(o==="function"){const n=e;s=new n(...t)}else throw new Error("At least one argument required");return h(a(s),t),s}d.extend=function(...t){return d.bind(this,...t)};d.ns=O;async function H(){const e=localStorage.getItem("autarisation-token"),s=await(await fetch("http://localhost:8000/api/tracks",{headers:{Authorization:`${e}`}})).json();return console.log(s),s}async function B(e){const t=await fetch("http://localhost:8000/api/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log(await t.json())}function D(){const e=document.querySelectorAll(".like"),t=H();let s=0;e.forEach((o,n)=>{o.addEventListener("click",function(i){o.classList.toggle("liked"),s=n})}),B(t[s])}function R(){const e=document.querySelectorAll(".aside__button");e.forEach(t=>{t.addEventListener("click",function(s){for(let o=0;o<e.length;o++)e[o].classList.remove("is-active");t.classList.toggle("is-active")})})}function z(){document.querySelector(".hero__header-button").addEventListener("click",function(t){const s=l("div",{class:"overlay"}),o=l("div",{class:"modal-window"},[l("button",{class:"modal-window__close",ariaLabel:"Кнопка закрытия модального окна",onclick:n},"Закрыть"),l("div",{class:"modal-window__buttons"},[l("a",{class:"modal-window__button",href:"./enter.html"},"Войти"),l("a",{class:"modal-window__button-sign",href:"./registration.html"},"Зарегестрироваться")])]);function n(){s.style.display="none",o.style.display="none"}document.querySelector(".main")?.append(s,o)})}function G(){const e=document.querySelectorAll(".table__option"),t=document.querySelectorAll(".option-card");e.forEach((s,o)=>{s.addEventListener("click",function(n){t[o].classList.toggle("option-card--active")})})}function Q(){const e=localStorage.getItem("username"),t=document.querySelector(".hero__header-text");e?t.textContent=e:t.textContent="user"}async function y(e){const t=localStorage.getItem("autarisation-token");e.innerHTML="";const o=await(await fetch("http://localhost:8000/api/tracks",{headers:{Authorization:`${t}`}})).json();let n=0;const i=l("table",{id:"table"},[o.map(c=>{if(n++,n<=6)return l("tr",[l("td",c.id),l("td",[l("div",{class:"table__artist"},[l("button",{class:"table__artist-button"},[l("img",{class:"table__artist-img",src:"./images/img-oblojca.jpg",alt:"Обложка группы Нирваны"}),d("svg",{class:"table__artist-svg",src:"./images/img-oblojca.jpg",alt:"Обложка группы Нирваны"},[d("use",{href:"./images/sprite.svg#icon-play-button"})])]),l("div",{class:"table__artist-content"},[l("span",{class:"table__artist-album"},c.title),l("span",{class:"table__artist-song"},c.artist)])])]),l("td",[l("span",{class:"table__album"},c.artist)]),l("td",[l("div",{class:"table__date"},[l("span",{class:"table__date-text"},`${c.id} дней назад`),l("button",{className:["table__date-like"],class:["like"],ariaLabel:"Кнопка добавить в избранное",type:"button"},[d("svg",{class:"table__icon"},[d("use",{href:"/images/sprite.svg#icon-like"})])])])]),l("td",[l("div",{class:"table__last"},[l("div",{class:"option-card"},[l("button",{class:"option-card__button"},"Удалить")]),l("span",{class:"table__time"},c.duration),l("button",{class:"table__option",ariaLabel:"Кнопка с опциями"},[d("svg",{class:["table__icon--option"],xmlns:"http://www.w3.org/2000/svg"},[d("use",{href:"/images/sprite.svg#icon-option"})])])])])])})]);F(e,[i]),Q()}function U(e){const t=document.querySelectorAll(".aside__button");t[1].classList.add("is-active"),(t[1].classList.contains("is-active")||t[0].classList.contains("is-active"))&&y(e)}window.onload=function(){let e=document.getElementById("table");y(e),setTimeout(()=>D(),50),R(),z(),setTimeout(()=>G(),50),U(e)};
